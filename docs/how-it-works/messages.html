<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-how-it-works/messages">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Messages | BPMN</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://1000kit.github.io/bpmn/img/bpmnicon1.png"><meta data-rh="true" name="twitter:image" content="https://1000kit.github.io/bpmn/img/bpmnicon1.png"><meta data-rh="true" property="og:url" content="https://1000kit.github.io/bpmn/docs/how-it-works/messages"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Messages | BPMN"><meta data-rh="true" name="description" content="Camunda 8 uses message buffering, so the process instance doesn&#x27;t have to be ready to receive the message event at exactly the moment it occurs (use message attribute TTL - time to live instead of time events or retry workarounds). Buffered message is mapped to a process instance based on the correlation key. Here the best practices on creating of correlation key taken from book Practical process automation"><meta data-rh="true" property="og:description" content="Camunda 8 uses message buffering, so the process instance doesn&#x27;t have to be ready to receive the message event at exactly the moment it occurs (use message attribute TTL - time to live instead of time events or retry workarounds). Buffered message is mapped to a process instance based on the correlation key. Here the best practices on creating of correlation key taken from book Practical process automation"><link data-rh="true" rel="icon" href="/bpmn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://1000kit.github.io/bpmn/docs/how-it-works/messages"><link data-rh="true" rel="alternate" href="https://1000kit.github.io/bpmn/docs/how-it-works/messages" hreflang="en"><link data-rh="true" rel="alternate" href="https://1000kit.github.io/bpmn/docs/how-it-works/messages" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/bpmn/blog/rss.xml" title="BPMN RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/bpmn/blog/atom.xml" title="BPMN Atom Feed">



<script defer="defer" src="/bpmn/js/bpmn.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" async></script>
<script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js" async></script>
<script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js" async></script>
<script>document.addEventListener("readystatechange",(e=>{"complete"===e.target.readyState&&renderAllBpmnJs()}))</script><link rel="stylesheet" href="/bpmn/assets/css/styles.3e16dc93.css">
<link rel="preload" href="/bpmn/assets/js/runtime~main.183029df.js" as="script">
<link rel="preload" href="/bpmn/assets/js/main.fe6a7678.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_wQKd" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/bpmn/"><div class="navbar__logo"><img src="/bpmn/img/bpmnicon1.png" alt="BPMN" class="themedImage_pTi6 themedImage--light_OaX7"><img src="/bpmn/img/bpmnicon1.png" alt="BPMN" class="themedImage_pTi6 themedImage--dark_CVr6"></div><b class="navbar__title text--truncate">BPMN</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/bpmn/docs/references">Best practices</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/1000kit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hRjY"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_httU colorModeToggle_Gq0k"><button class="clean-btn toggleButton_tXv_ toggleButtonDisabled_JfnE" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_B6xB"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_HdU3"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dvtd"><div class="navbar__search searchBarContainer_L7b5"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_FYU1 searchBarLoadingRing_IUcU"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_zkl4 docsWrapper_gXJY"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_hGq_" type="button"></button><div class="docPage_KfIq"><aside class="theme-doc-sidebar-container docSidebarContainer_cdzM"><div class="sidebarViewport_HTwd"><div class="sidebar_wsOm"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_O7VT"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/bpmn/docs/references">References</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/bpmn/docs/category/how-it-works">How it works</a><button aria-label="Toggle the collapsible sidebar category &#x27;How it works&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/bpmn/docs/how-it-works/open-topics">Open topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/bpmn/docs/how-it-works/messages">Messages</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/bpmn/docs/category/common-patterns">Common patterns</a><button aria-label="Toggle the collapsible sidebar category &#x27;Common patterns&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_uLw_"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_w7gv"><div class="docItemContainer_oLtF"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Qwt0" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/bpmn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_ysQk"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/bpmn/docs/category/how-it-works"><span itemprop="name">How it works</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Messages</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_Pto0 theme-doc-toc-mobile tocMobile__pHj"><button type="button" class="clean-btn tocCollapsibleButton_FTz3">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Messages</h1><p>Camunda 8 uses <strong><a href="https://docs.camunda.io/docs/components/concepts/messages/#message-buffering" target="_blank" rel="noopener noreferrer">message buffering</a></strong>, so the process instance doesn&#x27;t have to be ready to receive the message event at exactly the moment it occurs (use message attribute TTL - time to live instead of time events or retry workarounds). Buffered message is mapped to a process instance based on the correlation key. Here the best practices on creating of correlation key taken from <strong><a href="https://camunda.com/blog/2021/03/publishing-practical-process-automation/" target="_blank" rel="noopener noreferrer">book Practical process automation</a></strong></p><ul><li>use UUID for correlation ID</li><li>don&#x27;t use process instance ID</li><li>avoid using business data that are not unique within the cluster</li></ul><p>The correlation key have to be unique within the cluster to assure that the message is catched by the right process. The following situations show how the matching of message and process instance is done when the correlation key is the same.</p><h2 class="anchor anchorWithStickyNavbar_z2N2" id="identify-the-process-instance-waiting-for-the-response">Identify the process instance waiting for the response<a href="#identify-the-process-instance-waiting-for-the-response" class="hash-link" aria-label="Direct link to Identify the process instance waiting for the response" title="Direct link to Identify the process instance waiting for the response">​</a></h2><h3 class="anchor anchorWithStickyNavbar_z2N2" id="several-instances-within-a-process">Several instances within a process<a href="#several-instances-within-a-process" class="hash-link" aria-label="Direct link to Several instances within a process" title="Direct link to Several instances within a process">​</a></h3><p>When several process instances within a one process are running and subscribe for a message, the message is correlated only once to one of them.</p><p><img loading="lazy" alt="Process with several instances" src="/bpmn/assets/images/msg_oneProcessManyInstances-0d1a8463ccbbd3865a13c8460192e866.svg" width="3986" height="1803" class="img_PtKd"></p><p>Other instances remain waiting (unless not handled in a process differently). See <strong><a href="https://docs.camunda.io/docs/components/concepts/process-instance-modification/" target="_blank" rel="noopener noreferrer">process instance modification</a></strong> for possibilities to repair a running process instance.</p><h3 class="anchor anchorWithStickyNavbar_z2N2" id="processes-with-different-bpmn-ids">Processes with different BPMN IDs<a href="#processes-with-different-bpmn-ids" class="hash-link" aria-label="Direct link to Processes with different BPMN IDs" title="Direct link to Processes with different BPMN IDs">​</a></h3><p>Processes with different BPMN Process IDs are independend different processes. By creation of multiple subscriptions with the same correlation key from different processes, a message is correlated within each process (once within one BPMN process ID) to only one process instance from all existing ones.</p><p><img loading="lazy" alt="Processes with different BPMN process IDs" src="/bpmn/assets/images/msg_differentProcesses-2752b43fc5bb79a27c1133140d223d91.svg" width="3999" height="2706" class="img_PtKd"></p><h3 class="anchor anchorWithStickyNavbar_z2N2" id="processes-with-the-same-bpmn-id-but-different-versions">Processes with the same BPMN ID but different versions<a href="#processes-with-the-same-bpmn-id-but-different-versions" class="hash-link" aria-label="Direct link to Processes with the same BPMN ID but different versions" title="Direct link to Processes with the same BPMN ID but different versions">​</a></h3><p>When a process is deployed, it receives a version number. After making changes to the process and re-deployment, the process version is increased, the BPMN Process ID remains the same as before. Instances can be created for any of these versions. There might be two process instances of the same process but with different versions created when:</p><ul><li>one version of a process is deployed and an instance is created</li><li>the process was changed and deployed again<ul><li>the process with the same BPMN Process ID but different version is created</li><li>an instance is created</li></ul></li></ul><p><img loading="lazy" alt="One BPMN process ID with several versions" src="/bpmn/assets/images/msg_oneProcessManyVersions-0440bad4377a0b33ca7d98c18cbc698b.svg" width="3986" height="2735" class="img_PtKd"></p><p>A message is correlated only once to a process (once within one BPMN process ID), across all versions of this process. If multiple subscriptions for the same process are opened (by multiple process instances or within one instance), the message is correlated only to one of the subscriptions.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/bpmn/docs/how-it-works/open-topics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Open topics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/bpmn/docs/category/common-patterns"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common patterns</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_SRW5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#identify-the-process-instance-waiting-for-the-response" class="table-of-contents__link toc-highlight">Identify the process instance waiting for the response</a><ul><li><a href="#several-instances-within-a-process" class="table-of-contents__link toc-highlight">Several instances within a process</a></li><li><a href="#processes-with-different-bpmn-ids" class="table-of-contents__link toc-highlight">Processes with different BPMN IDs</a></li><li><a href="#processes-with-the-same-bpmn-id-but-different-versions" class="table-of-contents__link toc-highlight">Processes with the same BPMN ID but different versions</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 1000kit BPMN best practices.</div></div></div></footer></div>
<script src="/bpmn/assets/js/runtime~main.183029df.js"></script>
<script src="/bpmn/assets/js/main.fe6a7678.js"></script>
</body>
</html>